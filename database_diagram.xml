<?xml version="1.0" encoding="utf-8" ?>
<!-- SQL XML created by WWW SQL Designer, https://github.com/ondras/wwwsqldesigner/ -->
<!-- Active URL: https://sql.toad.cz/ -->
<sql>
<datatypes db="postgresql">
  <group label="Numeric" color="rgb(238,238,170)">
    <type label="Integer" length="0" sql="INTEGER" quote=""/>
    <type label="Small Integer" length="0" sql="SMALLINT" quote=""/>
    <type label="Big Integer" length="0" sql="BIGINT" quote=""/>
    <type label="Decimal" length="1" sql="DECIMAL" quote=""/>
    <type label="Serial" length="0" sql="SERIAL" quote=""/>
    <type label="Big Serial" length="0" sql="BIGSERIAL" quote=""/>
  </group>

  <group label="Character" color="rgb(255,200,200)">
    <type label="Char" length="1" sql="CHAR" quote="'"/>
    <type label="Varchar" length="1" sql="VARCHAR" quote="'"/>
    <type label="Text" length="0" sql="TEXT" quote="'"/>
  </group>

  <group label="Date &amp; Time" color="rgb(200,255,200)">
    <type label="Date" length="0" sql="DATE" quote="'"/>
    <type label="Time" length="0" sql="TIME" quote="'"/>
    <type label="Timestamp" length="0" sql="TIMESTAMP" quote="'"/>
  </group>

  <group label="Boolean" color="rgb(200,200,255)">
    <type label="Boolean" length="0" sql="BOOLEAN" quote=""/>
  </group>
</datatypes>

<table x="200" y="100" name="users">
<row name="id" null="0" autoincrement="1">
<datatype>BIGSERIAL</datatype>
<default>NULL</default>
<comment>Уникальный идентификатор пользователя</comment>
</row>
<row name="email" null="0" autoincrement="0">
<datatype>VARCHAR(255)</datatype>
<default>NULL</default>
<comment>Email (используется для входа)</comment>
</row>
<row name="name" null="0" autoincrement="0">
<datatype>VARCHAR(255)</datatype>
<default>NULL</default>
<comment>Имя пользователя</comment>
</row>
<row name="password" null="0" autoincrement="0">
<datatype>VARCHAR(128)</datatype>
<default>NULL</default>
<comment>Хешированный пароль</comment>
</row>
<row name="is_active" null="0" autoincrement="0">
<datatype>BOOLEAN</datatype>
<default>TRUE</default>
<comment>Активен ли пользователь</comment>
</row>
<row name="is_staff" null="0" autoincrement="0">
<datatype>BOOLEAN</datatype>
<default>FALSE</default>
<comment>Доступ к админ-панели</comment>
</row>
<row name="is_superuser" null="0" autoincrement="0">
<datatype>BOOLEAN</datatype>
<default>FALSE</default>
<comment>Суперпользователь</comment>
</row>
<row name="last_login" null="1" autoincrement="0">
<datatype>TIMESTAMP</datatype>
<default>NULL</default>
<comment>Дата последнего входа</comment>
</row>
<row name="created_at" null="0" autoincrement="0">
<datatype>TIMESTAMP</datatype>
<default>CURRENT_TIMESTAMP</default>
<comment>Дата регистрации</comment>
</row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
<key type="UNIQUE" name="unique_email">
<part>email</part>
</key>
<comment>Таблица пользователей платформы</comment>
</table>

<table x="600" y="100" name="events">
<row name="id" null="0" autoincrement="1">
<datatype>BIGSERIAL</datatype>
<default>NULL</default>
<comment>Уникальный идентификатор мероприятия</comment>
</row>
<row name="title" null="0" autoincrement="0">
<datatype>VARCHAR(255)</datatype>
<default>NULL</default>
<comment>Название мероприятия</comment>
</row>
<row name="description" null="0" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default>
<comment>Описание мероприятия</comment>
</row>
<row name="date" null="0" autoincrement="0">
<datatype>TIMESTAMP</datatype>
<default>NULL</default>
<comment>Дата и время проведения</comment>
</row>
<row name="organizer_id" null="0" autoincrement="0">
<datatype>BIGINT</datatype>
<default>NULL</default>
<relation table="users" row="id" />
<comment>ID организатора (FK -> users)</comment>
</row>
<row name="created_at" null="0" autoincrement="0">
<datatype>TIMESTAMP</datatype>
<default>CURRENT_TIMESTAMP</default>
<comment>Дата создания</comment>
</row>
<row name="updated_at" null="0" autoincrement="0">
<datatype>TIMESTAMP</datatype>
<default>CURRENT_TIMESTAMP</default>
<comment>Дата обновления</comment>
</row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
<key type="INDEX" name="idx_date">
<part>date</part>
</key>
<key type="INDEX" name="idx_organizer">
<part>organizer_id</part>
</key>
<comment>Таблица мероприятий</comment>
</table>

<table x="400" y="400" name="events_participants">
<row name="id" null="0" autoincrement="1">
<datatype>BIGSERIAL</datatype>
<default>NULL</default>
<comment>Уникальный идентификатор записи</comment>
</row>
<row name="event_id" null="0" autoincrement="0">
<datatype>BIGINT</datatype>
<default>NULL</default>
<relation table="events" row="id" />
<comment>ID мероприятия (FK -> events)</comment>
</row>
<row name="user_id" null="0" autoincrement="0">
<datatype>BIGINT</datatype>
<default>NULL</default>
<relation table="users" row="id" />
<comment>ID участника (FK -> users)</comment>
</row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
<key type="UNIQUE" name="unique_event_user">
<part>event_id</part>
<part>user_id</part>
</key>
<comment>Связь мероприятия и участников (Many-to-Many)</comment>
</table>

</sql>
